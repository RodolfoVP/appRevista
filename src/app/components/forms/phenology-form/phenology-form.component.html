<ng-container *ngIf="formularioListo;else cargando" >

    <!-- Formulario insert -->
    <div class="form-container">
        <h2 class="form-title">{{titulo}}</h2>
        <div class="form-fields">
            <mat-card>
    
                <mat-card-content>
                    <form class="phenology-card" [formGroup]="phenologyForm" >
                        <mat-form-field appearance="outline" [style.display]="'none'">
                            <mat-label>Cod registro fenologia</mat-label>
                            <input  matInput formControlName="phenologyidReg"  [readonly]="true"  >
                        </mat-form-field>

                        <!-- Validaciones SEQUENS  -->
                        <mat-form-field appearance="outline" >
                            <mat-label>Orden</mat-label>
                            <input  matInput formControlName="sequens"  maxlength="4" >
                            <mat-error *ngIf="sequens?.errors?.['required'] && sequens?.touched ">
                                El campo Código es obligatorio.
                            </mat-error>
                            <mat-error *ngIf="sequens?.errors?.['pattern']  && sequens?.touched ">
                                El campo Código solo puede incluir caracteres numéricos.
                            </mat-error>
                        </mat-form-field>
                            
                        <!-- Validaciones DESCRIPTION  -->
                        <mat-form-field appearance="outline" >
                            <mat-label>Descripción</mat-label>
                            <input  matInput formControlName="description"  maxlength="256" >
                            <mat-error *ngIf="description?.errors?.['required'] && description?.touched ">
                                El campo Descripción es obligatorio.
                            </mat-error>
                            <!--
                            <mat-error *ngIf="description?.errors?.['pattern']  && description?.touched ">
                                El campo Descripción solo puede incluir caracteres alfabéticos y especiales.
                            </mat-error> -->
                        </mat-form-field>

                        <!-- Validaciones FERTSAPPL  -->
                        <mat-form-field appearance="outline" >
                            <mat-label>Aplicaciones por producto</mat-label>
                            <input  matInput formControlName="fertsappl"  maxlength="4" onkeypress="return event.charCode >= 48 && event.charCode <= 57" >
                            <mat-error *ngIf="fertsappl?.errors?.['required'] && fertsappl?.touched ">
                                El campo Aplicaciones por producto es obligatorio.
                            </mat-error>
                            <mat-error *ngIf="fertsappl?.errors?.['pattern']  && fertsappl?.touched ">
                                El campo Aplicaciones por producto solo puede incluir numéricos mayores a 0.
                            </mat-error>
                        </mat-form-field>

                        <!-- Validaciones CULTIVEID  -->
                        <mat-form-field appearance="outline" [style.display]="'none'">
                            <mat-label>Cod cultivo</mat-label>
                            <input  matInput formControlName="cultiveId"  >
                        </mat-form-field>
        
                        <!-- Alinear botones a la derecha -->
                        <mat-card-actions class="phenology-botonera" >
                            <button mat-raised-button class="btn-phenology-cancelar" (click)="goCancelar()" >Cancelar</button>
                            <button mat-raised-button class="btn-phenology-confirmar" color="primary" [disabled]="phenologyForm.invalid" (click)="ejecutarFormulario()" >Confirmar</button>
                        </mat-card-actions> 
    
                    </form>
                </mat-card-content>
    
            </mat-card>
        </div>        
    </div>

</ng-container>
<ng-template #cargando>
    <app-spinner></app-spinner>
</ng-template>

 